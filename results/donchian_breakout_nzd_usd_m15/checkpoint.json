{
  "strategy_name": "donchian_breakout",
  "strategy_version": "1.0.0",
  "pair": "NZD/USD",
  "timeframe": "M15",
  "completed_stages": [
    3,
    4,
    5,
    6,
    7
  ],
  "current_stage": 7,
  "candidates": [
    {
      "candidate_index": 0,
      "params": {
        "donchian_period": 20,
        "sl_mode": "swing",
        "sl_fixed_pips": 30,
        "sl_atr_mult": 1.25,
        "tp_mode": "fixed_pips",
        "tp_rr_ratio": 5.0,
        "tp_atr_mult": 2.5,
        "tp_fixed_pips": 200,
        "trailing_mode": "off",
        "trail_activate_pips": 50,
        "trail_distance_pips": 10,
        "trail_atr_mult": 1.5,
        "breakeven_enabled": false,
        "breakeven_trigger_pips": 30,
        "breakeven_offset_pips": 3,
        "partial_close_enabled": false,
        "partial_close_pct": 70,
        "partial_close_trigger_pips": 20,
        "max_bars": 0,
        "stale_exit_enabled": true,
        "stale_exit_bars": 50,
        "stale_exit_atr_threshold": 1.0,
        "allowed_hours_start": 4,
        "allowed_hours_end": 4,
        "allowed_days": [
          1,
          2,
          3
        ]
      },
      "back_quality": 0.9294866919644024,
      "forward_quality": 0,
      "forward_back_ratio": 0.0,
      "back_sharpe": 0.43760814422833355,
      "back_trades": 555,
      "n_trials": 300000,
      "walk_forward": {
        "windows": [
          {
            "window_index": 35,
            "start_bar": 307055,
            "end_bar": 323258,
            "is_oos": true,
            "n_trades": 41,
            "sharpe": -2.4930544123153453,
            "quality_score": 0.0,
            "profit_factor": 0.4191179067057464,
            "max_dd_pct": 100.0,
            "return_pct": -2396.595835406146,
            "passed": false
          },
          {
            "window_index": 36,
            "start_bar": 315828,
            "end_bar": 332031,
            "is_oos": true,
            "n_trades": 34,
            "sharpe": -1.271604074236811,
            "quality_score": 0.0,
            "profit_factor": 0.6071697757678557,
            "max_dd_pct": 184.96135680549588,
            "return_pct": -1291.3372198943246,
            "passed": false
          },
          {
            "window_index": 37,
            "start_bar": 324601,
            "end_bar": 340804,
            "is_oos": true,
            "n_trades": 42,
            "sharpe": 0.8206969768599501,
            "quality_score": 0.001370022757007204,
            "profit_factor": 1.3572912731394093,
            "max_dd_pct": 149.94691518225585,
            "return_pct": 1206.0573857598479,
            "passed": true
          },
          {
            "window_index": 38,
            "start_bar": 333374,
            "end_bar": 349577,
            "is_oos": true,
            "n_trades": 45,
            "sharpe": 0.5706619736362174,
            "quality_score": 0.14673839924801604,
            "profit_factor": 1.2370114280226647,
            "max_dd_pct": 100.0,
            "return_pct": 809.9474912485417,
            "passed": true
          },
          {
            "window_index": 39,
            "start_bar": 342147,
            "end_bar": 358350,
            "is_oos": true,
            "n_trades": 46,
            "sharpe": -0.08863148918190004,
            "quality_score": 0.0,
            "profit_factor": 0.96911835943807,
            "max_dd_pct": 174.3333676516009,
            "return_pct": -101.64057535672578,
            "passed": false
          },
          {
            "window_index": 40,
            "start_bar": 350920,
            "end_bar": 367123,
            "is_oos": true,
            "n_trades": 48,
            "sharpe": -1.0949392255900172,
            "quality_score": 0.0,
            "profit_factor": 0.6860473614968574,
            "max_dd_pct": 194.01699452915824,
            "return_pct": -1225.4621099554204,
            "passed": false
          },
          {
            "window_index": 0,
            "start_bar": 0,
            "end_bar": 16203,
            "is_oos": false,
            "n_trades": 13,
            "sharpe": 2.2984275703350923,
            "quality_score": 1.6420069158366097,
            "profit_factor": 3.5405904059040783,
            "max_dd_pct": 18.709150326797317,
            "return_pct": 1234.9775784753397,
            "passed": true
          },
          {
            "window_index": 1,
            "start_bar": 8773,
            "end_bar": 24976,
            "is_oos": false,
            "n_trades": 20,
            "sharpe": 1.4305348491515437,
            "quality_score": 0.7438743140737191,
            "profit_factor": 2.033872117898745,
            "max_dd_pct": 37.864285714285536,
            "return_pct": 1035.7185379211846,
            "passed": true
          },
          {
            "window_index": 2,
            "start_bar": 17546,
            "end_bar": 33749,
            "is_oos": false,
            "n_trades": 26,
            "sharpe": -0.7170368971017766,
            "quality_score": 0.0,
            "profit_factor": 0.7237381222212567,
            "max_dd_pct": 157.59723736822872,
            "return_pct": -387.7729668674647,
            "passed": false
          },
          {
            "window_index": 3,
            "start_bar": 26319,
            "end_bar": 42522,
            "is_oos": false,
            "n_trades": 15,
            "sharpe": -7.7623744699714265,
            "quality_score": 0.0,
            "profit_factor": 0.03489294210943708,
            "max_dd_pct": 100.0,
            "return_pct": -1119.0232938291745,
            "passed": false
          },
          {
            "window_index": 4,
            "start_bar": 35092,
            "end_bar": 51295,
            "is_oos": false,
            "n_trades": 20,
            "sharpe": -1.0621252204452398,
            "quality_score": 0.0,
            "profit_factor": 0.5855572998430122,
            "max_dd_pct": 110.1494275179513,
            "return_pct": -525.7116082933175,
            "passed": false
          },
          {
            "window_index": 5,
            "start_bar": 43865,
            "end_bar": 60068,
            "is_oos": false,
            "n_trades": 15,
            "sharpe": 0.23432163238713674,
            "quality_score": 0.0020883584617979872,
            "profit_factor": 1.1350525543876728,
            "max_dd_pct": 115.09702688267834,
            "return_pct": 114.76942251765144,
            "passed": true
          },
          {
            "window_index": 6,
            "start_bar": 52638,
            "end_bar": 68841,
            "is_oos": false,
            "n_trades": 14,
            "sharpe": -0.7329641486666729,
            "quality_score": 0.0,
            "profit_factor": 0.6994613434727506,
            "max_dd_pct": 179.4056090414399,
            "return_pct": -277.7161978458645,
            "passed": false
          },
          {
            "window_index": 7,
            "start_bar": 61411,
            "end_bar": 77614,
            "is_oos": false,
            "n_trades": 17,
            "sharpe": -0.4612921581554006,
            "quality_score": 0.0,
            "profit_factor": 0.8031741210418418,
            "max_dd_pct": 174.35202439437518,
            "return_pct": -210.5705820510365,
            "passed": false
          },
          {
            "window_index": 8,
            "start_bar": 70184,
            "end_bar": 86387,
            "is_oos": false,
            "n_trades": 21,
            "sharpe": 2.4619564448628593,
            "quality_score": 4.561159777219702,
            "profit_factor": 3.7905912502288306,
            "max_dd_pct": 25.897015414889925,
            "return_pct": 1357.582054109072,
            "passed": true
          },
          {
            "window_index": 9,
            "start_bar": 78957,
            "end_bar": 95160,
            "is_oos": false,
            "n_trades": 22,
            "sharpe": 3.459249643135293,
            "quality_score": 12.89111782284855,
            "profit_factor": 5.000134680134674,
            "max_dd_pct": 9.089775172284801,
            "return_pct": 2693.85718997361,
            "passed": true
          },
          {
            "window_index": 10,
            "start_bar": 87730,
            "end_bar": 103933,
            "is_oos": false,
            "n_trades": 24,
            "sharpe": -0.5567907057784763,
            "quality_score": 0.0,
            "profit_factor": 0.7854800155650686,
            "max_dd_pct": 138.06095275668184,
            "return_pct": -373.4214982662652,
            "passed": false
          },
          {
            "window_index": 11,
            "start_bar": 96503,
            "end_bar": 112706,
            "is_oos": false,
            "n_trades": 26,
            "sharpe": -11.654710597639315,
            "quality_score": 0.0,
            "profit_factor": 0.012834966611741726,
            "max_dd_pct": 100.0,
            "return_pct": -2192.7687634289036,
            "passed": false
          },
          {
            "window_index": 12,
            "start_bar": 105276,
            "end_bar": 121479,
            "is_oos": false,
            "n_trades": 27,
            "sharpe": -2.2035482805796263,
            "quality_score": 0.0,
            "profit_factor": 0.38851999409768423,
            "max_dd_pct": 100.0,
            "return_pct": -1259.6217352146457,
            "passed": false
          },
          {
            "window_index": 13,
            "start_bar": 114049,
            "end_bar": 130252,
            "is_oos": false,
            "n_trades": 26,
            "sharpe": -0.6921760095881527,
            "quality_score": 0.0,
            "profit_factor": 0.7465608465608463,
            "max_dd_pct": 195.4110588616826,
            "return_pct": -461.43015931826665,
            "passed": false
          },
          {
            "window_index": 14,
            "start_bar": 122822,
            "end_bar": 139025,
            "is_oos": false,
            "n_trades": 32,
            "sharpe": 3.011554775033831,
            "quality_score": 3.832479926450139,
            "profit_factor": 2.822470969766718,
            "max_dd_pct": 25.8649093904448,
            "return_pct": 2781.9352263087053,
            "passed": true
          },
          {
            "window_index": 15,
            "start_bar": 131595,
            "end_bar": 147798,
            "is_oos": false,
            "n_trades": 38,
            "sharpe": 3.335983846365048,
            "quality_score": 17.647130716716628,
            "profit_factor": 2.899379349257108,
            "max_dd_pct": 12.558754088418162,
            "return_pct": 3277.6359055387234,
            "passed": true
          },
          {
            "window_index": 16,
            "start_bar": 140368,
            "end_bar": 156571,
            "is_oos": false,
            "n_trades": 34,
            "sharpe": -0.14364599352127425,
            "quality_score": 0.0,
            "profit_factor": 0.9486375386701732,
            "max_dd_pct": 112.78885723330087,
            "return_pct": -120.80206378986188,
            "passed": false
          },
          {
            "window_index": 17,
            "start_bar": 149141,
            "end_bar": 165344,
            "is_oos": false,
            "n_trades": 33,
            "sharpe": -1.5205473331560604,
            "quality_score": 0.0,
            "profit_factor": 0.5421626305468151,
            "max_dd_pct": 126.13806155991637,
            "return_pct": -1401.5018191048264,
            "passed": false
          },
          {
            "window_index": 18,
            "start_bar": 157914,
            "end_bar": 174117,
            "is_oos": false,
            "n_trades": 31,
            "sharpe": 3.6549648870027136,
            "quality_score": 8.675185761848189,
            "profit_factor": 3.9932057789925848,
            "max_dd_pct": 17.489996362313626,
            "return_pct": 5711.7969426016625,
            "passed": true
          },
          {
            "window_index": 19,
            "start_bar": 166687,
            "end_bar": 182890,
            "is_oos": false,
            "n_trades": 47,
            "sharpe": 3.2213191350798778,
            "quality_score": 6.049064644965419,
            "profit_factor": 2.731125444472021,
            "max_dd_pct": 34.435944855413524,
            "return_pct": 5838.950210670004,
            "passed": true
          },
          {
            "window_index": 20,
            "start_bar": 175460,
            "end_bar": 191663,
            "is_oos": false,
            "n_trades": 42,
            "sharpe": 1.2790100488441416,
            "quality_score": 0.9010972035810226,
            "profit_factor": 1.5852604375529153,
            "max_dd_pct": 40.9872434830839,
            "return_pct": 2164.770051797216,
            "passed": true
          },
          {
            "window_index": 21,
            "start_bar": 184233,
            "end_bar": 200436,
            "is_oos": false,
            "n_trades": 42,
            "sharpe": 0.6215306037649357,
            "quality_score": 0.003358244796730779,
            "profit_factor": 1.25565738609217,
            "max_dd_pct": 71.28403432566999,
            "return_pct": 685.0254932387512,
            "passed": true
          },
          {
            "window_index": 22,
            "start_bar": 193006,
            "end_bar": 209209,
            "is_oos": false,
            "n_trades": 47,
            "sharpe": -2.122991412078157,
            "quality_score": 0.0,
            "profit_factor": 0.4768731305172551,
            "max_dd_pct": 112.76850356010281,
            "return_pct": -1877.826377667563,
            "passed": false
          },
          {
            "window_index": 23,
            "start_bar": 201779,
            "end_bar": 217982,
            "is_oos": false,
            "n_trades": 34,
            "sharpe": -0.3504697140550304,
            "quality_score": 0.0,
            "profit_factor": 0.8625654450261857,
            "max_dd_pct": 138.57339660186426,
            "return_pct": -441.922838869377,
            "passed": false
          },
          {
            "window_index": 24,
            "start_bar": 210552,
            "end_bar": 226755,
            "is_oos": false,
            "n_trades": 19,
            "sharpe": 0.09089076273355153,
            "quality_score": 0.00915966670650952,
            "profit_factor": 1.051152482269508,
            "max_dd_pct": 135.36261232755274,
            "return_pct": 89.61092038581774,
            "passed": true
          },
          {
            "window_index": 25,
            "start_bar": 219325,
            "end_bar": 235528,
            "is_oos": false,
            "n_trades": 23,
            "sharpe": 1.2755674816690916,
            "quality_score": 0.26753373485780335,
            "profit_factor": 1.780021093867711,
            "max_dd_pct": 45.79675761170444,
            "return_pct": 1077.5656108597263,
            "passed": true
          },
          {
            "window_index": 26,
            "start_bar": 228098,
            "end_bar": 244301,
            "is_oos": false,
            "n_trades": 42,
            "sharpe": -0.8907381947908126,
            "quality_score": 0.0,
            "profit_factor": 0.7410397645816034,
            "max_dd_pct": 124.19221209610576,
            "return_pct": -916.6550079491252,
            "passed": false
          },
          {
            "window_index": 27,
            "start_bar": 236871,
            "end_bar": 253074,
            "is_oos": false,
            "n_trades": 37,
            "sharpe": -1.4384857315320743,
            "quality_score": 0.0,
            "profit_factor": 0.5877800232188193,
            "max_dd_pct": 100.0,
            "return_pct": -1422.974165596898,
            "passed": false
          },
          {
            "window_index": 28,
            "start_bar": 245644,
            "end_bar": 261847,
            "is_oos": false,
            "n_trades": 33,
            "sharpe": 1.4597587126476503,
            "quality_score": 0.9227234263086117,
            "profit_factor": 1.765849717209812,
            "max_dd_pct": 48.97045658012455,
            "return_pct": 1943.959231024208,
            "passed": true
          },
          {
            "window_index": 29,
            "start_bar": 254417,
            "end_bar": 270620,
            "is_oos": false,
            "n_trades": 41,
            "sharpe": 3.9849660239925813,
            "quality_score": 11.405597173916389,
            "profit_factor": 3.6552979941037202,
            "max_dd_pct": 18.036148398689374,
            "return_pct": 6207.297297297321,
            "passed": true
          },
          {
            "window_index": 30,
            "start_bar": 263190,
            "end_bar": 279393,
            "is_oos": false,
            "n_trades": 49,
            "sharpe": 2.576433349187674,
            "quality_score": 2.754227664884168,
            "profit_factor": 2.137090413709049,
            "max_dd_pct": 26.33494471300753,
            "return_pct": 3701.8435594512284,
            "passed": true
          },
          {
            "window_index": 31,
            "start_bar": 271963,
            "end_bar": 288166,
            "is_oos": false,
            "n_trades": 46,
            "sharpe": 0.571441635336472,
            "quality_score": 0.10893067238989973,
            "profit_factor": 1.1930437471015611,
            "max_dd_pct": 62.636715463570056,
            "return_pct": 691.7726396917129,
            "passed": true
          },
          {
            "window_index": 32,
            "start_bar": 280736,
            "end_bar": 296939,
            "is_oos": false,
            "n_trades": 39,
            "sharpe": 0.4265318338457828,
            "quality_score": 0.0012268835445196332,
            "profit_factor": 1.1568079765230008,
            "max_dd_pct": 108.71313672922271,
            "return_pct": 489.5420581908771,
            "passed": true
          },
          {
            "window_index": 33,
            "start_bar": 289509,
            "end_bar": 305712,
            "is_oos": false,
            "n_trades": 29,
            "sharpe": -0.2793066005661144,
            "quality_score": 0.0,
            "profit_factor": 0.8940555875703734,
            "max_dd_pct": 133.4833204034135,
            "return_pct": -264.078335746394,
            "passed": false
          },
          {
            "window_index": 34,
            "start_bar": 298282,
            "end_bar": 314485,
            "is_oos": false,
            "n_trades": 34,
            "sharpe": -1.0943896585502892,
            "quality_score": 0.0,
            "profit_factor": 0.6508853681267522,
            "max_dd_pct": 117.6133739724764,
            "return_pct": -1039.1123439666967,
            "passed": false
          }
        ],
        "n_windows": 41,
        "n_oos_windows": 6,
        "n_passed": 2,
        "pass_rate": 0.3333333333333333,
        "mean_sharpe": -0.5928117084713178,
        "mean_quality": 0.024684737000837207,
        "geo_mean_quality": 0.014178679286047447,
        "min_quality": 0.0,
        "quality_cv": 2.211340130146638,
        "wfe": 0.001398796064759358,
        "passed_gate": false
      },
      "cpcv": null,
      "stability": null,
      "monte_carlo": null,
      "regime": null,
      "trade_stats": {
        "n_trades": 4989,
        "total_pnl_pips": 28999.85,
        "total_pnl_usd": 2899.99,
        "lot_size": 0.01,
        "pip_value_usd": 0.1,
        "win_rate": 23.3,
        "profit_factor": 1.19,
        "avg_pnl_pips": 5.81,
        "median_pnl_pips": -29.8,
        "best_trade_pips": 198.25,
        "worst_trade_pips": -155.7,
        "std_dev_pips": 89.23,
        "avg_bars_held": 401.2,
        "exit_breakdown": {
          "stop_loss": {
            "count": 3730,
            "pct": 74.8,
            "pnl_pips": -146709.1,
            "pnl_usd": -14670.91
          },
          "take_profit": {
            "count": 777,
            "pct": 15.6,
            "pnl_pips": 153439.45,
            "pnl_usd": 15343.94
          },
          "stale_exit": {
            "count": 480,
            "pct": 9.6,
            "pnl_pips": 22283.4,
            "pnl_usd": 2228.34
          },
          "open": {
            "count": 2,
            "pct": 0.0,
            "pnl_pips": -13.9,
            "pnl_usd": -1.39
          }
        },
        "direction_stats": {
          "BUY": {
            "n_trades": 2482,
            "win_rate": 21.3,
            "total_pnl_pips": 4422.95,
            "total_pnl_usd": 442.3
          },
          "SELL": {
            "n_trades": 2507,
            "win_rate": 25.3,
            "total_pnl_pips": 24576.9,
            "total_pnl_usd": 2457.69
          }
        }
      },
      "confidence": null,
      "eliminated": false,
      "eliminated_at_stage": "walk_forward",
      "elimination_reason": "pass_rate=0.33, mean_sharpe=-0.59",
      "force_deployed": true,
      "force_deploy_note": "Force-deployed for practice testing. Original: eliminated at walk_forward (pass_rate=0.33, mean_sharpe=-0.59)"
    }
  ],
  "config_dict": {
    "commission_pips": 0.7,
    "max_spread_pips": 3.0,
    "bars_per_year": 24192,
    "output_dir": "pipeline_output",
    "n_candidates": 20,
    "wf_window_bars": 16203,
    "wf_step_bars": 8101,
    "wf_embargo_bars": 672,
    "wf_anchored": false,
    "wf_lookback_prefix": 800,
    "wf_max_trades_per_trial": 5000,
    "wf_min_trades_per_window": 10,
    "wf_pass_rate_gate": 0.6,
    "wf_mean_sharpe_gate": 0.3,
    "cpcv_enabled": true,
    "cpcv_n_blocks": 10,
    "cpcv_k_test": 2,
    "cpcv_purge_bars": 800,
    "cpcv_embargo_bars": 672,
    "cpcv_min_block_bars": 2000,
    "cpcv_pct_positive_sharpe_gate": 0.6,
    "cpcv_mean_sharpe_gate": 0.2,
    "stab_perturbation_steps": 3,
    "stab_use_forward_data": true,
    "stab_robust_mean": 0.8,
    "stab_robust_min": 0.5,
    "stab_moderate_mean": 0.6,
    "stab_fragile_mean": 0.4,
    "mc_n_bootstrap": 1000,
    "mc_block_size": 10,
    "mc_n_permutations": 1000,
    "mc_skip_levels": [
      0.05,
      0.1
    ],
    "mc_stress_slippage_mult": 1.5,
    "mc_stress_commission_mult": 1.3,
    "mc_dsr_gate": 0.95,
    "mc_permutation_p_gate": 0.05,
    "mc_bootstrap_ci": 0.95,
    "conf_weight_walk_forward": 0.3,
    "conf_weight_monte_carlo": 0.25,
    "conf_weight_forward_back": 0.15,
    "conf_weight_stability": 0.1,
    "conf_weight_dsr": 0.1,
    "conf_weight_backtest": 0.1,
    "conf_green_threshold": 70.0,
    "conf_yellow_threshold": 40.0,
    "regime_enabled": true,
    "regime_adx_period": 14,
    "regime_atr_period": 14,
    "regime_adx_trending": 25.0,
    "regime_adx_ranging": 20.0,
    "regime_natr_lookback": 100,
    "regime_natr_high_pctile": 75.0,
    "regime_min_bars": 32,
    "regime_min_trades": 30,
    "checkpoint_enabled": true,
    "seed": 42
  },
  "seed": 42
}